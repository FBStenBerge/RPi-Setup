<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A fast way to setup Raspberry Pi with Raspbian">
	<meta name="author" content="Krisjanis Rijnieks">
	<title>Raspberry Pi ASAP Setup Guide</title>
	
	<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="css/main.css" rel="stylesheet" media="all">
	
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Choose your OS</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">Mac</a></li>
            <li class="active"><a href="#">Win</a></li>
            <li><a href="#">Linux</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

	<div class="container">
	
		<h1>Raspberry Pi ASAP Setup Guide</h1>
		<p>A fast way to setup Raspberry Pi with Raspbian. This guide is a combination of information found on the internet and experience. Feel free to contribute via <a href="https://github.com/kr15h/RPi-Setup">GitHub</a>.</p>

		<!-- SECTION -->
		<h2>Tools and knowledge overview</h2>

		<p>We will need a couple of tools to be able to work with the Pi throughout the process. First - we need to make sure that we have hardware that allows us to read and write SD cards as the Raspberry Pi needs a SD card to be able to wake up.</p>

		<p>We will be using SSH most of the time. SSH (Secure SHell) is a secure network protocol that allows to control other computers over network. <span class="mac linux">There is no problem with a SSH client on Mac or Linux - Terminal can handle SSH without any issues.</span><span class="win">If you are using Windows, download <a href="http://www.putty.org">Putty</a> for using it as your SSH client.</span></p>

		<p>We will need to upload and download files to and from the Raspberry Pi. We will make use of the SCP (Secure CoPy or Secure Copy Protocol) that is built on top of the SSH protocol and allows secure transfer of files. Download <a href="https://filezilla-project.org">FileZilla</a>. It works on Mac, Linux and Windows. <span class="win">You might consider <a href="http://winscp.net">WinSCP</a> as your weapon of choice if you are using Windows.</span></p>

		<p>Basic knowledge of <a href="http://www.johnstowers.co.nz/blog/pages/bash-cheat-sheet.html">shell scripting</a> and command line text-editing tools like <a href="http://www.tuxradar.com/content/text-editing-nano-made-easy">nano</a> will be useful as we will be using the shell more than once.</p>

		<h2>Install Raspbian</h2>

		<p>You can download the most recent version of Raspbian <a href="http://www.raspberrypi.org/downloads">here</a>. Download and unarchive.</p>

		<h3>Prepare SD card</h3>

		<p>Try to find a proper SD card for the job. It should be at least with 4 GB capacity. Class 4 to 10 have been working allright for me so far. It is better to choose one with a higher class number. There is a list of SD cards that have been tested with the Raspberry Pi <a href="http://elinux.org/RPi_SD_cards">here</a>. I usually go with SanDisk or Kingston.</p>

		<p>Once you've found a proper SD card, prepare it by formatting it to FAT32 file system. Some may say that it is useless as we will rewrite the whole file system in the next steps, but it is recomended to do it if your SD card will be used for the first time.</p>

		<p class="mac win">Download <a href="https://www.sdcard.org/downloads/formatter_4/">SDFormatter</a> if you use Mac or Windows. <span class="mac">You can use Mac Disk Utility, but SDFormatter is the recomended way.</span></p>

		<p class="linux">Use <a href="http://gparted.org">GParted</a> to format your SD card to FAT32 file system.</p>

		
		<h3>Burn Rasbian on to the SD card</h3>

		<div class="mac">
		<p>Open Terminal and use the following command to see what devices are connected to your computer:</p>

		<pre>diskutil list</pre>

		<p>The output in the Terminal window will look similar as the following:</p>

		<pre>/dev/disk0
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *256.1 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:                  Apple_HFS Macintosh HD            255.2 GB   disk0s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3</pre>

   		<p>Next - insert your SD card and issue the <b>diskutil</b> command again:</p>

   		<pre>diskutil list</pre>

   		<p>Press <b>Enter</b> and this time you should get output similar to this:</p>

   		<pre>/dev/disk0
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *256.1 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:                  Apple_HFS Macintosh HD            255.2 GB   disk0s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3
/dev/disk1
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:     FDisk_partition_scheme                        *3.9 GB     disk1
   1:                 DOS_FAT_32 EMPTY                   3.9 GB     disk1s1
</pre>
		
		<p>As you see, there is a new device - <b>/dev/disk1</b>. If you have more devices connected to your computer, the ID might look different. Try to find the ID that was not there before you inserted the SD card.</p>

		<p>Now we have to navigate to the directory where our Raspbian image is saved. Let's assume that it is in our home directory. To go to the home directory, thype the following in the terminal window:</p>

		<pre>cd ~</pre>

		<p>Press Enter. Check if the Raspbian image file is in the directory by entering the following command in the Terminal:</p>

		<pre>ls</pre>

		<p>A list of all files and folders in the directory should be output in the Terminal window. You should see the image file <b>2014-01-07-wheezy-raspbian.img</b> among them.</p>

		<p>Unmount the SD card to be able to write the image by using the following command:</p>

		<pre>diskutil unmount /dev/disk1</pre>

		<p>Wait till the disk is unmounted and then continue with the most important part - overwritting the contents of the SD card with the image. <b>WARNING:</b> be very careful with this as you can accidentaly damage your computer's system drive if you enter the wrong drive ID.</p>

		<pre>sudo dd if=2014-01-07-wheezy-raspbian.img of=/dev/rdisk1 bs=1m</pre>

		<p><b>if</b> is the input, <b>of</b> is the output and <b>bs</b> is the size of chunk of data that is being written to the output (the SD card, <b>/dev/rdisk1</b>) at a time.</p>

		<p>Double check the <b>of=/dev/rdisk1</b> part and press <b>Enter</b>. This process will some time. So go make a coffee. And a sandwich. You might be curious why the 'r' before the 'disk1'. Some people say it's faster. I believe.</p>

		<p>Once your Terminal has returned to it's normal state (you can tell that by being able to issue simple commands like <b>ls</b> and <b>cd</b>), eject the SD card by using this command:</p>

		<pre>diskutil eject /dev/disk1</pre>

		<p>When the terminal has returned to it's normal state, you can remove your SD card.</p>
		</div><!-- mac -->

		<div class="win">
			<p>Windows instructions comming soon...</p>
		</div><!-- win -->

		<div class="linux">
			<p>Linux instructions comming soon...</p>
		</div>


		<h2>Assigning IP address</h2>
		<p>In order to access the Raspberry Pi for further configuration we will need to set an IP address.</p>
		<p>To do that, mount the SD card and go to the boot partition of it. There you will find a file named <span class="filename">cmdline.txt</span>. This file contains options that are passed to the Linux kernel as it boots up. We need to add the following at the end of the existing content:</p>
		<pre>ip=192.168.1.200::192.168.1.1:255.255.255.0:rpi:eth0:off</pre>
		<p>We will be able to access the Pi through network with the IP address 192.168.1.200 after we set our ethernet connections TCP/IP settings correctly.</p>
		<p>Adjust your computer's network settings. Set the IP to 192.168.1.200, netmask to 255.255.255.0 and the gateway (router) address to 192.168.1.1. You may need to disconnect from any wireless newtorks to make it work.</p>

	<section>
		<h2>Booting up - the first time</h2>
		<p>Connect your Raspberry Pi to the computer with an ethernet wire. Don't forget to stick the SD card into the Pi's SD card slot. Power it up.</p>

		<p>TODO: introduce to Terminal (Mac and Linux) and CMD (Win).</p>

		<p>First try to ping the Pi with the following command: <span class="command">ping 192.168.1.200</span>. There should be response:</p>

		<pre>64 bytes from 192.168.1.200: icmp_seq=3 ttl=64 time=52.941 ms</pre>

		<p>If that is true, let's try to connect to the Pi via SSH. Use terminal for Mac and Linux, Putty for Win.</p>

		<pre>ssh pi@192.168.1.200</pre>

		<p>Enter passwoord: <span class="command">raspberry</span>. Now we're in. Let's change the real network settings.</p>

		<p>To do that open the <span class="filename">/etc/network/interfaces</span> file in an text editor like the commandline nano. Write this in to the Terminal or Putty (whatever you use for communicating with the Pi):</p>

		<pre>sudo nano /etc/network/interfaces</pre>

		<p>Add (copy and paste most probably) the following content there:</p>

		<pre>auto lo

iface lo inet loopback
iface eth0 inet static

auto wlan0
allow-hotplug wlan0
iface wlan0 inet static
wpa-ssid "YourWirelessNetwork"
wpa-psk "YourWirelessPassword"

# Assign your own if needed
address 192.168.1.200
netmask 255.255.255.0
gateway 192.168.1.1</pre>

		<p>Press <span class="key">Ctrl+X</span> to exit and then <span class="key">Y+Return</span> to save.</p>

		<p>Now we have to remove the extra line from <span class="filename">cmdline.txt</span> that we added earlier. To do that, open the file in nano by issuing the following command in Terminal or Putty:</p>

		<pre>sudo nano /boot/cmdline.txt</pre>

		<p>Delete the <span class="code">ip=192.168.1.200::192.168.1.1:255.255.255.0:rpi:eth0:off</span> part and press <span class="key">Ctrl+X</span> to exit and then <span class="key">Y+Return</span> to save again.</p>

		<p>Now, let's reboot our Pi by using the following command in Terminal or Putty</p>

		<pre>sudo reboot</pre>

		<p>Connect to your wireless network again if you did disconect from it earlier. In approximately 15 seconds you will be able to SSH to the Pi by using IP address 192.168.1.200 (if you have not changed it for something else), username "pi" and password "raspberry".</p>
	</section>

	<section>
		<h2>Expanding partition</h2>
		<p>In this step we are going to make use of the whole free space on our SD card.</p>
	</section>

	<section>
		<h2>Auto Login</h2>
		
		<p>To make your pi log in automatically, run the following line in the shell:</p>

		<pre>sudo nano /etc/inittab</pre>
		
		<p>Comment (by using #) the line starting the terminal tty1 ("1:2345:respawn:/sbin/getty 115200 tty1"), and just bellow it add:</p>

		<pre>1:2345:respawn:/bin/login -f pi tty1 /dev/tty1 2>&1</pre>

		<p>Close file and save by pressing <span>Ctrl+X</span> and <span>Y</span> and then <span>Return</span>.</p>
	</section>

	<section>
		<h2>Startup scripts</h2>

		Starting a program on boot
		<p>In /home/pi create an executable shell script called startup.sh:</p>

	<pre>touch startup.sh
chmod a+x startup.sh</pre>
		
		<p>Then open .bashrc</p> 

		<pre>sudo nano ~/.bashrc</pre>

		<p>and add the following line at the end of the file:</p>

		<pre>~/startup.sh</pre>

		<p>I think it is a good idea not to run everythin when you log in via SSH next time. Edit the <span>startup.sh</span> file to distinguish between direct login and SSH access. Open the file in text editor:</p>

		<pre>sudo nano ~/startup.sh</pre>

		<p>Replace the contents of the file with the following:</p>

		<pre>#!/bin/bash

echo "Checking SSH connection...";
if [ -z "$SSH_CONNECTION" ]; then
	echo "No SSH connection, launching scripts.";
	# Your scripts here
else
	echo "SSH connection, nothing to be launched.";
fi</pre>

		<p>You can add your own scripts just after the <span># Your scripts here</span> line.</p>

		<p>Close and save the file by using <span>Ctrl+X</span>, <span>y</span> and <span>Return</span>.</p>
	</section>
	</div>

	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="js/jquery.client.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/main.js"></script>
</body>

</html>