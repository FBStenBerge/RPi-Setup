<html>
<head>
	<title>Raspberry Pi ASAP Setup Guide</title>
	<meta name="author" content="Krisjanis Rijnieks">
	<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="main.js"></script>
	<link rel="stylesheet" type="text/css" media="all" href="css/main.css" />
</head>

<body>
	<header>
		<h1>Raspberry Pi ASAP Setup Guide</h1>
		<aside>The fastest way to setup Raspberry Pi with Raspbian.</aside>
	</header>

	<section>
		<h2>Tools and knowledge overview</h2>

		<p>We will need a couple of tools to be able to work with the Pi throughout the process. First - we need to make sure that we have hardware that allows us to read and write SD cards as the Raspberry Pi needs a SD card to be able to wake up.</p>

		<p>We will be using SSH most of the time. SSH (Secure SHell) is a secure network protocol that allows to control other computers over network.</p>

		<p>There is no problem with a SSH client on Mac or Linux - Terminal can handle SSH without any issues. Windows is a special case - we need a separate program for that. <a href="http://www.putty.org">Putty</a> has proven itself to be a good SSH client for Widows.</p>

		<p>We will need to upload and download files to and from the Raspberry Pi. We will make use of the SCP (Secure CoPy or Secure Copy Protocol) that is built on top of the SSH protocol and allows secure transfer of files. Download <a href="https://filezilla-project.org">FileZilla</a>. It works on Mac, Linux and Windows.</p>

		<p>Basic knowledge of <a href="http://www.johnstowers.co.nz/blog/pages/bash-cheat-sheet.html">shell scripting</a> and command line text-editing tools like <a href="http://www.cs.rit.edu/~cslab/vi.html">vi</a> or <a href="http://www.tuxradar.com/content/text-editing-nano-made-easy">nano</a> will be useful as we will be using the command line a lot.</p>
	</section>

	<section>
		<h2>Download Raspbian</h2>

		<p>You can download the most recent version of Raspbian <a href="http://www.raspberrypi.org/downloads">here</a>. Unzip the file after the download is over.</p>
	</section>

	<section>
		<h2>Prepare SD card</h2>

		<p>Try to find a proper SD card for the job. It should be at least with 4 GB capacity. Class 4 to 10 have been working allright for me so far. It is better to chose one with a higher class number. There is a list of SD cards that have been tested with the Raspberry Pi <a href="http://elinux.org/RPi_SD_cards">here</a>. I usually go with SanDisk or Kingston.</p>

		<p>Once you've found a proper SD card, prepare it by formating it to FAT32 filesystem. Some may say that it is useless as we will rewrite the whole file system in the next steps, but it is recomended to do it if your SD card will be used for the first time. Use <a href="https://www.sdcard.org/downloads/formatter_4/">SDFormatter</a>. You can use Mac DiskUtility, but SDFormatter is the recomended way.</p>
	</section>

	<section>
		<h2>Burn Rasbian on to the SD card</h2>
		<p class="mac">Open Terminal, cd to the directory where your Raspbian image is located (eg. <span class="path">~/Downloads</span>) and issue <span class="command"></span> the following commands to see the device path of your SD card. You should get a similar output to the following.</p>

		<pre>TODO</pre>

		<p>From the list here we can tell that the device that we need hides under the path <span class="path">/dev/disk2</span>. we need to unmount it by issuing <span>diskutil unmountDisk /dev/disk2</span> command.</p>

		<p>When that's done, we can start burning the Raspbian image onto the SD card. Be careful, make sure that you use the right device path or you might damage your computer. To burn the image, use the following command (it will take some time):</p>

		<pre>sudo dd if=2014-01-07-wheezy-raspbian.img of=/dev/rdisk2 bs=1m</pre>

		<p><span class="command">if</span> is the input, <span class="command">of</span> is the output and <span class="command">bs</span> is the size of chunk of data that is being written to the output at a time.</p>
	</section>

	<section>
		<h2>Assigning IP address</h2>
		<p>In order to access the Raspberry Pi for further configuration we will need to set an IP address.</p>
		<p>To do that, mount the SD card and go to the boot partition of it. There you will find a file named <span class="filename">cmdline.txt</span>. This file contains options that are passed to the Linux kernel as it boots up. We need to add the following at the end of the existing content:</p>
		<pre>ip=192.168.1.200::192.168.1.1:255.255.255.0:rpi:eth0:off</pre>
		<p>We will be able to access the Pi through network with the IP address 192.168.1.200 after we set our ethernet connections TCP/IP settings correctly.</p>
		<p>Adjust your computer's network settings. Set the IP to 192.168.1.200, netmask to 255.255.255.0 and the gateway (router) address to 192.168.1.1. You may need to disconnect from any wireless newtorks to make it work.</p>
	</section>

	<section>
		<h2>Booting up - the first time</h2>
		<p>Connect your Raspberry Pi to the computer with an ethernet wire. Don't forget to stick the SD card into the Pi's SD card slot. Power it up.</p>

		<p>TODO: introduce to Terminal (Mac and Linux) and CMD (Win).</p>

		<p>First try to ping the Pi with the following command: <span class="command">ping 192.168.1.200</span>. There should be response:</p>

		<pre>64 bytes from 192.168.1.200: icmp_seq=3 ttl=64 time=52.941 ms</pre>

		<p>If that is true, let's try to connect to the Pi via SSH. Use terminal for Mac and Linux, Putty for Win.</p>

		<pre>ssh pi@192.168.1.200</pre>

		<p>Enter passwoord: <span class="command">raspberry</span>. Now we're in. Let's change the real network settings.</p>

		<p>To do that open the <span class="filename">/etc/network/interfaces</span> file in an text editor like the commandline nano. Write this in to the Terminal or Putty (whatever you use for communicating with the Pi):</p>

		<pre>sudo nano /etc/network/interfaces</pre>

		<p>Add (copy and paste most probably) the following content there:</p>

		<pre>auto lo

iface lo inet loopback
iface eth0 inet static

auto wlan0
allow-hotplug wlan0
iface wlan0 inet static
wpa-ssid "YourWirelessNetwork"
wpa-psk "YourWirelessPassword"

# Assign your own if needed
address 192.168.1.200
netmask 255.255.255.0
gateway 192.168.1.1</pre>

		<p>Press <span class="key">Ctrl+X</span> to exit and then <span class="key">Y+Return</span> to save.</p>

		<p>Now we have to remove the extra line from <span class="filename">cmdline.txt</span> that we added earlier. To do that, open the file in nano by issuing the following command in Terminal or Putty:</p>

		<pre>sudo nano /boot/cmdline.txt</pre>

		<p>Delete the <span class="code">ip=192.168.1.200::192.168.1.1:255.255.255.0:rpi:eth0:off</span> part and press <span class="key">Ctrl+X</span> to exit and then <span class="key">Y+Return</span> to save again.</p>

		<p>Now, let's reboot our Pi by using the following command in Terminal or Putty</p>

		<pre>sudo reboot</pre>

		<p>Connect to your wireless network again if you did disconect from it earlier. In approximately 15 seconds you will be able to SSH to the Pi by using IP address 192.168.1.200 (if you have not changed it for something else), username "pi" and password "raspberry".</p>
	</section>

	<section>
		<h2>Expanding partition</h2>
		<p>In this step we are going to make use of the whole free space on our SD card.</p>
	</section>

	<section>
		<h2>Auto Login</h2>
		
		<p>To make your pi log in automatically, run the following line in the shell:</p>

		<pre>sudo nano /etc/inittab</pre>
		
		<p>Comment (by using #) the line starting the terminal tty1 ("1:2345:respawn:/sbin/getty 115200 tty1"), and just bellow it add:</p>

		<pre>1:2345:respawn:/bin/login -f pi tty1 /dev/tty1 2>&1</pre>

		<p>Close file and save by pressing <span>Ctrl+X</span> and <span>Y</span> and then <span>Return</span>.</p>
	</section>

	<section>
		<h2>Startup scripts</h2>

		Starting a program on boot
		<p>In /home/pi create an executable shell script called startup.sh:</p>

	<pre>touch startup.sh
chmod a+x startup.sh</pre>
		
		<p>Then open .bashrc</p> 

		<pre>sudo nano ~/.bashrc</pre>

		<p>and add the following line at the end of the file:</p>

		<pre>~/startup.sh</pre>

		<p>I think it is a good idea not to run everythin when you log in via SSH next time. Edit the <span>startup.sh</span> file to distinguish between direct login and SSH access. Open the file in text editor:</p>

		<pre>sudo nano ~/startup.sh</pre>

		<p>Replace the contents of the file with the following:</p>

		<pre>#!/bin/bash

echo "Checking SSH connection...";
if [ -z "$SSH_CONNECTION" ]; then
	echo "No SSH connection, launching scripts.";
	# Your scripts here
else
	echo "SSH connection, nothing to be launched.";
fi</pre>

		<p>You can add your own scripts just after the <span># Your scripts here</span> line.</p>

		<p>Close and save the file by using <span>Ctrl+X</span>, <span>y</span> and <span>Return</span>.</p>
	</section>


</body>

</html>